<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduTutor AI - Personalized Learning Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin: 5px;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #f093fb, #f5576c);
        }

        .hidden {
            display: none;
        }

        .google-classroom {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .subject-selector {
            margin-bottom: 20px;
        }

        .subject-selector select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
        }

        .video-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 56.25%;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .quiz-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .question-card {
            background: #f8f9ff;
            border: 2px solid #e1e5ff;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .options {
            list-style: none;
            padding: 0;
        }

        .options li {
            margin-bottom: 10px;
        }

        .options label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .options label:hover {
            background-color: #e1e5ff;
        }

        .options input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        .feedback.correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stat-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-card .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #764ba2;
        }

        .video-lesson-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .video-lesson-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            border-color: #667eea;
        }

        .video-lesson-card.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #f8f9ff 0%, #e8ecff 100%);
        }

        .video-thumbnail {
            width: 100%;
            height: 120px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            margin-bottom: 10px;
            position: relative;
        }

        .play-overlay {
            position: absolute;
            background: rgba(0,0,0,0.7);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .play-overlay:hover {
            background: rgba(0,0,0,0.9);
            transform: scale(1.1);
        }

        .lesson-info h4 {
            color: #333;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .lesson-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 8px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .card {
                padding: 20px;
            }

            #video-lessons {
                grid-template-columns: 1fr;
            }

            .video-lesson-card {
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì EduTutor AI</h1>
            <p>Personalized Learning with Generative AI and LMS Integration</p>
        </div>

        <!-- Login Section -->
        <div id="login-section" class="main-content">
            <div class="card">
                <h2>üë®‚Äçüéì Student Portal</h2>
                <p>Access personalized quizzes, track your progress, and sync with Google Classroom.</p>
                <button class="btn" onclick="loginAsStudent()">Login as Student</button>
            </div>
            <div class="card">
                <h2>üë®‚Äçüè´ Educator Dashboard</h2>
                <p>Monitor student progress, view analytics, and manage course content.</p>
                <button class="btn btn-secondary" onclick="loginAsEducator()">Login as Educator</button>
            </div>
        </div>

        <!-- Google Classroom Section -->
        <div id="classroom-section" class="google-classroom hidden">
            <h2>üìö Google Classroom Integration</h2>
            
            <!-- Google Classroom Authentication -->
            <div id="auth-section">
                <div class="card" style="margin-bottom: 20px;">
                    <h3>üîê Connect to Google Classroom</h3>
                    <p>Securely connect your Google Classroom account to sync courses and content.</p>
                    <button class="btn" onclick="authenticateGoogleClassroom()">üîó Connect Google Classroom</button>
                    <div id="auth-status" class="hidden" style="margin-top: 15px; padding: 10px; background: #d4edda; border-radius: 5px; color: #155724;">
                        ‚úÖ Successfully connected to Google Classroom!
                    </div>
                </div>
            </div>

            <!-- Course Selection -->
            <div id="course-section" class="hidden">
                <div class="subject-selector">
                    <label for="course-select">Select Course:</label>
                    <select id="course-select" onchange="loadCourseContent()">
                        <option value="">Choose a course...</option>
                        <option value="math-101">Mathematics 101 - Advanced Calculus</option>
                        <option value="physics-201">Physics 201 - Quantum Mechanics</option>
                        <option value="english-301">English 301 - Literature Analysis</option>
                        <option value="chemistry-101">Chemistry 101 - Organic Chemistry</option>
                    </select>
                </div>
            </div>

            <!-- Subject Content -->
            <div id="content-section" class="hidden">
                <div class="subject-selector" style="margin-bottom: 20px;">
                    <label for="subject-select">Select Topic:</label>
                    <select id="subject-select" onchange="loadSubjectVideo()">
                        <option value="">Choose a topic...</option>
                        <option value="mathematics">Calculus & Derivatives</option>
                        <option value="science">Quantum Physics Basics</option>
                        <option value="english">Poetry Analysis Techniques</option>
                    </select>
                </div>
                
                <div id="video-section" class="hidden">
                    <!-- Class Information Header -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3 id="class-title">üìö Class Session</h3>
                        <p id="class-description">Select a video lesson to begin</p>
                        <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.9;">
                            <span>üë• Students Enrolled: 45</span> | 
                            <span>‚è±Ô∏è Total Duration: 60 mins</span> | 
                            <span>üìä Completion Rate: 78%</span>
                        </div>
                    </div>

                    <!-- Video Lessons Grid -->
                    <div id="video-lessons" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px;">
                        <!-- Video lessons will be populated here -->
                    </div>

                    <!-- Active Video Player -->
                    <div id="active-video-section" class="hidden">
                        <div style="background: white; border-radius: 10px; padding: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h4 id="current-video-title">Current Lesson</h4>
                                <span id="video-duration" style="background: #667eea; color: white; padding: 5px 10px; border-radius: 15px; font-size: 0.8rem;">‚è±Ô∏è 0:00</span>
                            </div>
                            <div class="video-container">
                                <iframe id="subject-video" src="" frameborder="0" allowfullscreen allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
                            </div>
                            <p id="current-video-description" style="margin-top: 15px; color: #666; font-style: italic;"></p>
                        </div>
                    </div>

                    <!-- Learning Objectives -->
                    <div style="background: #f8f9ff; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h4 style="color: #667eea; margin-bottom: 15px;">üìã Learning Objectives:</h4>
                        <ul id="learning-objectives" style="color: #555;">
                            <li>Understanding core concepts</li>
                            <li>Practical application skills</li>
                            <li>Problem-solving techniques</li>
                        </ul>
                    </div>

                    <!-- Action Buttons -->
                    <div style="text-align: center;">
                        <button class="btn" onclick="syncWithEduTutor()" style="margin: 5px;">üîÑ Sync with EduTutor AI</button>
                        <button class="btn btn-secondary" onclick="generateQuiz()" style="margin: 5px;">üìù Generate Quiz from Videos</button>
                        <button class="btn" onclick="downloadNotes()" style="margin: 5px; background: linear-gradient(45deg, #28a745, #20c997);">üìù Download Notes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Student Portal -->
        <div id="student-portal" class="hidden">
            <div class="quiz-container">
                <h2>üìù Personalized Quiz</h2>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
                <p id="progress-text">Question 1 of 5</p>
                
                <div id="quiz-content">
                    <div class="question-card">
                        <h3 id="question-text">Loading your personalized quiz...</h3>
                        <ul class="options" id="question-options"></ul>
                        <div id="question-feedback" class="feedback hidden"></div>
                        <button class="btn hidden" id="next-question-btn" onclick="nextQuestion()">Next Question ‚û°Ô∏è</button>
                    </div>
                </div>

                <div class="dashboard">
                    <div class="stat-card">
                        <h3>Current Score</h3>
                        <div class="stat-number" id="current-score">0/0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Accuracy</h3>
                        <div class="stat-number" id="accuracy">0%</div>
                    </div>
                    <div class="stat-card">
                        <h3>Subject Focus</h3>
                        <div class="stat-number" id="subject-focus">-</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Educator Dashboard -->
        <div id="educator-dashboard" class="hidden">
            <div class="card">
                <h2>üìä Educator Dashboard</h2>
                <div class="dashboard">
                    <div class="stat-card">
                        <h3>Total Students</h3>
                        <div class="stat-number">127</div>
                    </div>
                    <div class="stat-card">
                        <h3>Active Quizzes</h3>
                        <div class="stat-number">15</div>
                    </div>
                    <div class="stat-card">
                        <h3>Avg. Performance</h3>
                        <div class="stat-number">78%</div>
                    </div>
                    <div class="stat-card">
                        <h3>Courses Synced</h3>
                        <div class="stat-number">8</div>
                    </div>
                </div>
                
                <h3 style="margin-top: 30px; color: #667eea;">Recent Student Activity</h3>
                <div style="background: #f8f9ff; padding: 20px; border-radius: 10px; margin-top: 15px;">
                    <p><strong>John Doe</strong> - Mathematics Quiz - Score: 85% - Last Active: 2 hours ago</p>
                    <p><strong>Jane Smith</strong> - Science Quiz - Score: 92% - Last Active: 1 hour ago</p>
                    <p><strong>Mike Johnson</strong> - English Quiz - Score: 78% - Last Active: 30 minutes ago</p>
                </div>
            </div>
        </div>

        <button class="btn" onclick="goBack()" id="back-btn" style="margin-top: 20px; display: none;">‚Üê Back to Home</button>
    </div>

    <script>
        // Educational content with multiple videos for each subject
        const subjectContent = {
            mathematics: {
                title: "Mathematics Class - Calculus & Algebra",
                description: "Complete mathematics course with multiple lessons",
                videos: [
                    {
                        id: "math1",
                        title: "Introduction to Calculus",
                        url: "https://www.youtube.com/embed/WUvTyaaNkzM",
                        duration: "15:30",
                        description: "Learn the basics of calculus and derivatives"
                    },
                    {
                        id: "math2", 
                        title: "Advanced Integration Techniques",
                        url: "https://www.youtube.com/embed/rfG8ce4nNh0",
                        duration: "12:45",
                        description: "Master integration by parts and substitution"
                    },
                    {
                        id: "math3",
                        title: "Linear Algebra Fundamentals",
                        url: "https://www.youtube.com/embed/fNk_zzaMoSs",
                        duration: "18:20",
                        description: "Understanding vectors, matrices, and linear transformations"
                    }
                ],
                objectives: [
                    "Understand derivative rules and applications",
                    "Master integration techniques", 
                    "Solve linear algebra problems",
                    "Apply calculus to real-world scenarios"
                ]
            },
            science: {
                title: "Physics Class - Quantum Mechanics & Thermodynamics",
                description: "Comprehensive physics course covering modern physics",
                videos: [
                    {
                        id: "physics1",
                        title: "Quantum Mechanics Basics",
                        url: "https://www.youtube.com/embed/p7nGr3_jmJo",
                        duration: "16:15",
                        description: "Introduction to quantum physics principles"
                    },
                    {
                        id: "physics2",
                        title: "Wave-Particle Duality",
                        url: "https://www.youtube.com/embed/Q_h4IoPJXZw",
                        duration: "14:30",
                        description: "Understanding the dual nature of matter and energy"
                    },
                    {
                        id: "physics3",
                        title: "Thermodynamics Laws",
                        url: "https://www.youtube.com/embed/NyOYW07-L5g",
                        duration: "13:45", 
                        description: "The four laws of thermodynamics explained"
                    }
                ],
                objectives: [
                    "Understand quantum mechanics principles",
                    "Learn about wave-particle duality",
                    "Master thermodynamics concepts",
                    "Apply physics to modern technology"
                ]
            },
            english: {
                title: "English Literature Class - Poetry & Prose Analysis",
                description: "Advanced literature course focusing on analysis techniques",
                videos: [
                    {
                        id: "english1",
                        title: "Poetry Analysis Techniques",
                        url: "https://www.youtube.com/embed/mKE9jgcgkdw",
                        duration: "11:20",
                        description: "Learn to analyze poetic devices and themes"
                    },
                    {
                        id: "english2",
                        title: "Shakespeare's Literary Devices",
                        url: "https://www.youtube.com/embed/1kBuBjA-DuE",
                        duration: "17:10",
                        description: "Understanding metaphors, symbolism in Shakespeare"
                    },
                    {
                        id: "english3",
                        title: "Modern Literature Criticism",
                        url: "https://www.youtube.com/embed/MSYw502dJNY",
                        duration: "19:30",
                        description: "Critical approaches to contemporary literature"
                    }
                ],
                objectives: [
                    "Identify poetic devices and techniques",
                    "Analyze themes and meanings in texts",
                    "Write effective literary analyses",
                    "Apply critical theory to literature"
                ]
            }
        };

        // Google Classroom simulation data
        const classroomData = {
            "math-101": {
                name: "Mathematics 101 - Advanced Calculus",
                topics: ["Derivatives", "Integration", "Series", "Applications"]
            },
            "physics-201": {
                name: "Physics 201 - Quantum Mechanics", 
                topics: ["Wave Functions", "Uncertainty Principle", "Quantum States"]
            },
            "english-301": {
                name: "English 301 - Literature Analysis",
                topics: ["Poetry Analysis", "Novel Structure", "Character Development"]
            },
            "chemistry-101": {
                name: "Chemistry 101 - Organic Chemistry",
                topics: ["Molecular Structure", "Reactions", "Synthesis"]
            }
        };

        // Sample quiz questions based on subjects
        const quizQuestions = {
            mathematics: [
                {
                    question: "What is the derivative of x¬≤?",
                    options: ["2x", "x¬≤", "2", "x"],
                    correct: 0,
                    explanation: "The derivative of x¬≤ is 2x using the power rule."
                },
                {
                    question: "What is the integral of 2x?",
                    options: ["x¬≤ + C", "2x¬≤ + C", "x¬≤", "2x"],
                    correct: 0,
                    explanation: "The integral of 2x is x¬≤ + C."
                },
                {
                    question: "What is sin(œÄ/2)?",
                    options: ["0", "1", "-1", "œÄ/2"],
                    correct: 1,
                    explanation: "sin(œÄ/2) = 1."
                },
                {
                    question: "What is the slope of the line y = 3x + 5?",
                    options: ["3", "5", "-3", "0"],
                    correct: 0,
                    explanation: "In the equation y = mx + b, m is the slope. So the slope is 3."
                },
                {
                    question: "What is log‚ÇÅ‚ÇÄ(100)?",
                    options: ["10", "2", "100", "1"],
                    correct: 1,
                    explanation: "log‚ÇÅ‚ÇÄ(100) = 2 because 10¬≤ = 100."
                }
            ],
            science: [
                {
                    question: "What is the chemical symbol for gold?",
                    options: ["Go", "Gd", "Au", "Ag"],
                    correct: 2,
                    explanation: "Au is the chemical symbol for gold, from the Latin 'aurum'."
                },
                {
                    question: "What is the speed of light in vacuum?",
                    options: ["3 √ó 10‚Å∏ m/s", "3 √ó 10‚Å∂ m/s", "3 √ó 10¬π‚Å∞ m/s", "3 √ó 10‚Å¥ m/s"],
                    correct: 0,
                    explanation: "The speed of light in vacuum is approximately 3 √ó 10‚Å∏ m/s."
                },
                {
                    question: "Which planet is closest to the Sun?",
                    options: ["Venus", "Earth", "Mercury", "Mars"],
                    correct: 2,
                    explanation: "Mercury is the closest planet to the Sun."
                },
                {
                    question: "What is H‚ÇÇO?",
                    options: ["Hydrogen peroxide", "Water", "Helium oxide", "Heavy water"],
                    correct: 1,
                    explanation: "H‚ÇÇO is the chemical formula for water."
                },
                {
                    question: "What is the unit of electric current?",
                    options: ["Volt", "Watt", "Ampere", "Ohm"],
                    correct: 2,
                    explanation: "The ampere (A) is the unit of electric current."
                }
            ],
            english: [
                {
                    question: "Who wrote 'Romeo and Juliet'?",
                    options: ["Charles Dickens", "William Shakespeare", "Mark Twain", "Jane Austen"],
                    correct: 1,
                    explanation: "William Shakespeare wrote the famous tragedy 'Romeo and Juliet'."
                },
                {
                    question: "What is a metaphor?",
                    options: ["A direct comparison using 'like' or 'as'", "An indirect comparison without using 'like' or 'as'", "A type of rhyme", "A form of alliteration"],
                    correct: 1,
                    explanation: "A metaphor is an indirect comparison that doesn't use 'like' or 'as'."
                },
                {
                    question: "What is the past tense of 'run'?",
                    options: ["Runned", "Ran", "Running", "Runs"],
                    correct: 1,
                    explanation: "The past tense of 'run' is 'ran'."
                },
                {
                    question: "Which of these is a compound sentence?",
                    options: ["I like ice cream.", "I like ice cream, and she likes cake.", "Although I like ice cream.", "Ice cream is delicious."],
                    correct: 1,
                    explanation: "A compound sentence contains two independent clauses joined by a conjunction."
                },
                {
                    question: "What is alliteration?",
                    options: ["Repetition of vowel sounds", "Repetition of consonant sounds at the beginning of words", "Repetition of entire words", "Repetition of rhyming words"],
                    correct: 1,
                    explanation: "Alliteration is the repetition of initial consonant sounds in consecutive words."
                }
            ]
        };

        let currentUser = null;
        let currentSubject = null;
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let answered = false;

        function loginAsStudent() {
            currentUser = 'student';
            document.getElementById('login-section').classList.add('hidden');
            document.getElementById('classroom-section').classList.remove('hidden');
            document.getElementById('back-btn').style.display = 'inline-block';
        }

        function loginAsEducator() {
            currentUser = 'educator';
            document.getElementById('login-section').classList.add('hidden');
            document.getElementById('educator-dashboard').classList.remove('hidden');
            document.getElementById('back-btn').style.display = 'inline-block';
        }

        function authenticateGoogleClassroom() {
            // Simulate Google Classroom authentication
            const btn = event.target;
            btn.innerHTML = 'üîÑ Connecting...';
            btn.disabled = true;
            
            setTimeout(() => {
                document.getElementById('auth-status').classList.remove('hidden');
                document.getElementById('course-section').classList.remove('hidden');
                btn.innerHTML = '‚úÖ Connected!';
                
                // Show success message
                setTimeout(() => {
                    btn.innerHTML = 'üîó Connect Google Classroom';
                    btn.disabled = false;
                }, 2000);
            }, 2000);
        }

        function loadCourseContent() {
            const courseId = document.getElementById('course-select').value;
            if (courseId) {
                document.getElementById('content-section').classList.remove('hidden');
                
                // Update subject options based on course
                const subjectSelect = document.getElementById('subject-select');
                const course = classroomData[courseId];
                
                if (course) {
                    // Clear and repopulate subject options
                    subjectSelect.innerHTML = '<option value="">Choose a topic...</option>';
                    
                    if (courseId === 'math-101') {
                        subjectSelect.innerHTML += '<option value="mathematics">Calculus & Derivatives</option>';
                    } else if (courseId === 'physics-201') {
                        subjectSelect.innerHTML += '<option value="science">Quantum Physics Basics</option>';
                    } else if (courseId === 'english-301') {
                        subjectSelect.innerHTML += '<option value="english">Poetry Analysis Techniques</option>';
                    }
                }
            }
        }

        let currentVideoIndex = 0;
        let selectedVideo = null;

        function loadSubjectVideo() {
            const subject = document.getElementById('subject-select').value;
            if (subject && subjectContent[subject]) {
                currentSubject = subject;
                const content = subjectContent[subject];
                
                // Update class information
                document.getElementById('class-title').textContent = `üìö ${content.title}`;
                document.getElementById('class-description').textContent = content.description;
                
                // Load video lessons
                loadVideoLessons(content.videos);
                
                // Update learning objectives
                const objectivesList = document.getElementById('learning-objectives');
                objectivesList.innerHTML = content.objectives.map(obj => `<li>${obj}</li>`).join('');
                
                document.getElementById('video-section').classList.remove('hidden');
                document.getElementById('subject-focus').textContent = subject.charAt(0).toUpperCase() + subject.slice(1);
            }
        }

        function loadVideoLessons(videos) {
            const lessonsContainer = document.getElementById('video-lessons');
            lessonsContainer.innerHTML = '';
            
            videos.forEach((video, index) => {
                const lessonCard = document.createElement('div');
                lessonCard.className = 'video-lesson-card';
                lessonCard.onclick = () => playVideoLesson(video, index);
                
                lessonCard.innerHTML = `
                    <div class="video-thumbnail">
                        üé•
                        <div class="play-overlay">‚ñ∂Ô∏è</div>
                    </div>
                    <div class="lesson-info">
                        <h4>${video.title}</h4>
                        <div class="lesson-meta">
                            <span>‚è±Ô∏è ${video.duration}</span>
                            <span>üìä Lesson ${index + 1}</span>
                        </div>
                        <p class="lesson-description">${video.description}</p>
                    </div>
                `;
                
                lessonsContainer.appendChild(lessonCard);
            });
        }

        function playVideoLesson(video, index) {
            selectedVideo = video;
            currentVideoIndex = index;
            
            // Update active lesson card
            document.querySelectorAll('.video-lesson-card').forEach((card, i) => {
                card.classList.toggle('active', i === index);
            });
            
            // Show active video section
            document.getElementById('active-video-section').classList.remove('hidden');
            
            // Update video player
            document.getElementById('current-video-title').textContent = video.title;
            document.getElementById('video-duration').textContent = `‚è±Ô∏è ${video.duration}`;
            document.getElementById('current-video-description').textContent = video.description;
            document.getElementById('subject-video').src = video.url + "?autoplay=1&rel=0";
            
            // Scroll to video player
            document.getElementById('active-video-section').scrollIntoView({ behavior: 'smooth' });
        }

        function downloadNotes() {
            if (selectedVideo) {
                // Simulate note download
                const notes = `
Class Notes: ${selectedVideo.title}
Duration: ${selectedVideo.duration}
Description: ${selectedVideo.description}

Key Points:
- Interactive learning experience
- Comprehensive coverage of topics
- Practical applications included
- Quiz-ready content

Generated by EduTutor AI - Personalized Learning Platform
                `;
                
                const blob = new Blob([notes], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${selectedVideo.title.replace(/\s+/g, '_')}_Notes.txt`;
                a.click();
                URL.revokeObjectURL(url);
                
                // Show success message
                const btn = event.target;
                const originalText = btn.innerHTML;
                btn.innerHTML = '‚úÖ Downloaded!';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                }, 2000);
            } else {
                alert('Please select a video lesson first!');
            }
        }

        function syncWithEduTutor() {
            if (currentSubject) {
                // Simulate syncing animation
                const btn = event.target;
                btn.innerHTML = 'üîÑ Syncing...';
                btn.disabled = true;
                
                setTimeout(() => {
                    btn.innerHTML = '‚úÖ Synced!';
                    setTimeout(() => {
                        btn.innerHTML = 'üîÑ Sync with EduTutor AI';
                        btn.disabled = false;
                    }, 2000);
                }, 1500);
            }
        }

        function generateQuiz() {
            if (currentSubject) {
                // Enhanced quiz generation based on video content
                currentQuestions = quizQuestions[currentSubject];
                currentQuestionIndex = 0;
                score = 0;
                answered = false;
                
                // Add video-specific context to questions
                if (selectedVideo) {
                    // Create a quiz notification showing which video the quiz is based on
                    const quizNotification = document.createElement('div');
                    quizNotification.style.cssText = `
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        color: white;
                        padding: 15px;
                        border-radius: 10px;
                        margin-bottom: 20px;
                        text-align: center;
                    `;
                    quizNotification.innerHTML = `
                        <h4>üìù Quiz Generated from Video Content</h4>
                        <p>Based on: "${selectedVideo.title}" (${selectedVideo.duration})</p>
                        <p style="font-size: 0.9rem; opacity: 0.9;">This personalized quiz is tailored to the video content you just watched</p>
                    `;
                    
                    document.getElementById('classroom-section').classList.add('hidden');
                    document.getElementById('student-portal').classList.remove('hidden');
                    
                    // Add the notification to the quiz container
                    const quizContainer = document.querySelector('.quiz-container');
                    quizContainer.insertBefore(quizNotification, quizContainer.firstChild);
                } else {
                    document.getElementById('classroom-section').classList.add('hidden');
                    document.getElementById('student-portal').classList.remove('hidden');
                }
                
                displayQuestion();
                updateProgress();
            } else {
                alert('Please select a subject and watch a video lesson first!');
            }
        }

        function displayQuestion() {
            if (currentQuestionIndex < currentQuestions.length) {
                const question = currentQuestions[currentQuestionIndex];
                document.getElementById('question-text').textContent = question.question;
                
                const optionsHtml = question.options.map((option, index) => `
                    <li>
                        <label>
                            <input type="radio" name="answer" value="${index}" onchange="selectAnswer(${index})">
                            ${option}
                        </label>
                    </li>
                `).join('');
                
                document.getElementById('question-options').innerHTML = optionsHtml;
                document.getElementById('question-feedback').classList.add('hidden');
                document.getElementById('next-question-btn').classList.add('hidden');
                answered = false;
            } else {
                showFinalResults();
            }
        }

        function selectAnswer(selectedIndex) {
            if (answered) return;
            
            const question = currentQuestions[currentQuestionIndex];
            const isCorrect = selectedIndex === question.correct;
            const feedback = document.getElementById('question-feedback');
            
            if (isCorrect) {
                score++;
                feedback.textContent = `‚úÖ Correct! ${question.explanation}`;
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = `‚ùå Incorrect. ${question.explanation}`;
                feedback.className = 'feedback incorrect';
            }
            
            feedback.classList.remove('hidden');
            document.getElementById('next-question-btn').classList.remove('hidden');
            answered = true;
            
            updateStats();
        }

        function nextQuestion() {
            currentQuestionIndex++;
            displayQuestion();
            updateProgress();
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / currentQuestions.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = `Question ${currentQuestionIndex + 1} of ${currentQuestions.length}`;
        }

        function updateStats() {
            document.getElementById('current-score').textContent = `${score}/${currentQuestionIndex + 1}`;
            const accuracy = Math.round((score / (currentQuestionIndex + 1)) * 100);
            document.getElementById('accuracy').textContent = accuracy + '%';
        }

        function showFinalResults() {
            const finalAccuracy = Math.round((score / currentQuestions.length) * 100);
            document.getElementById('question-text').textContent = `Quiz Complete! üéâ`;
            document.getElementById('question-options').innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <h3>Your Final Results:</h3>
                    <p style="font-size: 1.5rem; margin: 15px 0;">Score: ${score}/${currentQuestions.length}</p>
                    <p style="font-size: 1.3rem; margin: 15px 0;">Accuracy: ${finalAccuracy}%</p>
                    <p style="margin: 15px 0;">Subject: ${currentSubject.charAt(0).toUpperCase() + currentSubject.slice(1)}</p>
                    <button class="btn" onclick="restartQuiz()">Take Quiz Again</button>
                    <button class="btn btn-secondary" onclick="goToClassroom()">Back to Classroom</button>
                </div>
            `;
            document.getElementById('question-feedback').classList.add('hidden');
            document.getElementById('next-question-btn').classList.add('hidden');
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            answered = false;
            displayQuestion();
            updateProgress();
        }

        function goToClassroom() {
            document.getElementById('student-portal').classList.add('hidden');
            document.getElementById('classroom-section').classList.remove('hidden');
        }

        function goBack() {
            // Reset all sections
            document.getElementById('login-section').classList.remove('hidden');
            document.getElementById('classroom-section').classList.add('hidden');
            document.getElementById('student-portal').classList.add('hidden');
            document.getElementById('educator-dashboard').classList.add('hidden');
            document.getElementById('back-btn').style.display = 'none';
            
            // Reset variables
            currentUser = null;
            currentSubject = null;
            document.getElementById('subject-select').value = '';
            document.getElementById('video-section').classList.add('hidden');
        }
    </script>
</body>
</html>